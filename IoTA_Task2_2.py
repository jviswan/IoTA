# -*- coding: utf-8 -*-
"""
Created on Fri Sep 20 21:36:09 2019

@author: JAYALAKSHMI
"""

from tabulate import tabulate
import random
import math

IAT_RT = int(input("Enter mean inter-arival time of RT messages:"))
IAT_nRT = int(input("Enter mean inter-arival time of nonRT messages:"))
ST_RT = int(input("Enter mean service time of RT messages:"))
ST_nRT = int(input("Enter mean service time of nonRT messages:"))
mc_end = int(input("Enter the maximum value of MC:"))
mc = 0
rtcl = 3
nrtcl = 5
nrt = 0
nnrt = 0
scl = 4
s = 2
pe = 0
table = []
table.append([mc, rtcl, nrtcl, nrt, nnrt, scl, s, pe])
ran = []
random.seed(0.1)
while mc < mc_end:
    if scl == "":
        mc = min(rtcl, nrtcl)
    else:
        mc = min(rtcl, nrtcl, scl)
    r = random.random()
    r_IAT_RT = -1*(IAT_RT)*math.log(r)
    r_IAT_nRT = -1*(IAT_nRT)*(math.log(r))
    r_ST_RT = -1*(ST_RT)*(math.log(r))
    r_ST_nRT = -1*(ST_nRT)*(math.log(r))
    if mc == rtcl:
        nrt = nrt + 1
        rtcl = mc + r_IAT_RT
        if nrt == 1:
            if s == 0:
                scl = round(mc + r_ST_RT,5)
                nrt = nrt - 1
                s = 1
            elif s == 2:
                pe = scl - mc
                if pe != 0:
                    nnrt = nnrt + 1
                scl = round(mc + r_ST_RT,5)
                nrt = nrt - 1
                s = 1
        table.append([mc, rtcl, nrtcl, nrt, nnrt, scl, s, pe])
    elif mc == nrtcl:
        nnrt = nnrt + 1
        nrtcl = mc + r_IAT_nRT
        if nnrt == 1:
            if s == 0:
                scl = round(mc + r_ST_nRT,5)
                nnrt = nnrt - 1
                s = 2
        table.append([mc, rtcl, nrtcl, nrt, nnrt, scl, s, pe])
    elif mc == scl:
        if nrt > 0:
            scl = round(mc + r_ST_RT,5)
            s = 1
            nrt = nrt - 1
        elif nnrt > 0:
            if pe > 0:
                scl = round(mc + pe,5)
                pe = 0
            else:
                scl = round(mc + r_ST_nRT,5)
            s = 2
            nnrt = nnrt - 1
        else:
            s = 0
            scl = ""
        table.append([mc, rtcl, nrtcl, nrt, nnrt, scl, s, pe])
print(tabulate(table, headers = ["MC", "RTCL", "nRTCL", "nRT", "nNRT", "SCL", "s", "PE"]))

'''
Output table:

       MC       RTCL      nRTCL    nRT    nNRT  SCL          s         PE
---------  ---------  ---------  -----  ------  ---------  ---  ---------
  0          3          5            0       0  4            2  0
  3          5.15352    5            0       1  3.4307       1  1
  3.4307     5.15352    5            0       0  4.4307       2  0
  4.4307     5.15352    5            0       0               0  0
  5          5.15352    9.27413      0       0  8.4193       2  0
  5.15352   13.3255     9.27413      0       1  6.78792      1  3.26578
  6.78792   13.3255     9.27413      0       0  10.0537      2  0
  9.27413   13.3255    10.9924       0       1  10.0537      2  0
 10.0537    13.3255    10.9924       0       0  18.19628     2  0
 10.9924    13.3255    14.5791       0       1  18.19628     2  0
 13.3255    27.2456    14.5791       0       2  16.10953     1  4.87076
 14.5791    27.2456    17.6174       0       3  16.10953     1  4.87076
 16.1095    27.2456    17.6174       0       2  20.98029     2  0
 17.6174    27.2456    20.8391       0       3  20.98029     2  0
 20.8391    27.2456    30.8936       0       4  20.98029     2  0
 20.9803    27.2456    30.8936       0       3  22.12926     2  0
 22.1293    27.2456    30.8936       0       2  27.72879     2  0
 27.2456    58.3277    30.8936       0       3  33.46201     1  0.483208
 30.8936    58.3277    37.6652       0       4  33.46201     1  0.483208
 33.462     58.3277    37.6652       0       3  33.94522     2  0
 33.9452    58.3277    37.6652       0       2  38.24426     2  0
 37.6652    58.3277    39.0478       0       3  38.24426     2  0
 38.2443    58.3277    39.0478       0       2  42.87866     2  0
 39.0478    58.3277    39.3948       0       3  42.87866     2  0
 39.3948    58.3277    45.2309       0       4  42.87866     2  0
 42.8787    58.3277    45.2309       0       3  45.9225      2  0
 45.2309    58.3277    52.7941       0       4  45.9225      2  0
 45.9225    58.3277    52.7941       0       3  48.84266     2  0
 48.8427    58.3277    52.7941       0       2  55.58914     2  0
 52.7941    58.3277    56.4464       0       3  55.58914     2  0
 55.5891    58.3277    56.4464       0       2  57.7956      2  0
 56.4464    58.3277    61.4315       0       3  57.7956      2  0
 57.7956    58.3277    61.4315       0       2  62.66291     2  0
 58.3277    72.824     61.4315       0       3  61.22697     1  4.33521
 61.227     72.824     61.4315       0       2  65.56218     2  0
 61.4315    72.824     65.703        0       3  65.56218     2  0
 65.5622    72.824     65.703        0       2  66.49339     2  0
 65.703     72.824     67.4689       0       3  66.49339     2  0
 66.4934    72.824     67.4689       0       2  66.61829     2  0
 66.6183    72.824     67.4689       0       1  67.64871     2  0
 67.4689    72.824     71.3525       0       2  67.64871     2  0
 67.6487    72.824     71.3525       0       1  70.20127     2  0
 70.2013    72.824     71.3525       0       0  73.19239     2  0
 71.3525    72.824     73.0532       0       1  73.19239     2  0
 72.824     94.0849    73.0532       0       2  77.0762      1  0.368368
 73.0532    94.0849    75.5806       0       3  77.0762      1  0.368368
 75.5806    94.0849    78.2574       0       4  77.0762      1  0.368368
 77.0762    94.0849    78.2574       0       3  77.44457     2  0
 77.4446    94.0849    78.2574       0       2  80.39677     2  0
 78.2574    94.0849    78.5354       0       3  80.39677     2  0
 78.5354    94.0849    82.1039       0       4  80.39677     2  0
 80.3968    94.0849    82.1039       0       3  87.42315     2  0
 82.1039    94.0849    86.3074       0       4  87.42315     2  0
 86.3074    94.0849    88.2223       0       5  87.42315     2  0
 87.4232    94.0849    88.2223       0       4  89.71306     2  0
 88.2223    94.0849    89.8375       0       5  89.71306     2  0
 89.7131    94.0849    89.8375       0       4  91.09236     2  0
 89.8375    94.0849    92.6222       0       5  91.09236     2  0
 91.0924    94.0849    92.6222       0       4  91.18317     2  0
 91.1832    94.0849    92.6222       0       3  91.68275     2  0
 91.6827    94.0849    92.6222       0       2  97.33818     2  0
 92.6222    94.0849    92.8492       0       3  97.33818     2  0
 92.8492    94.0849    93.4646       0       4  97.33818     2  0
 93.4646    94.0849    95.4522       0       5  97.33818     2  0
 94.0849   100.909     95.4522       0       6  95.44982     1  3.25325
 95.4498   100.909     95.4522       0       5  98.70307     2  0
 95.4522   100.909     98.0743       0       6  98.70307     2  0
 98.0743   100.909    101.568        0       7  98.70307     2  0
 98.7031   100.909    101.568        0       6  99.54059     2  0
 99.5406   100.909    101.568        0       5  100.16018    2  0
100.16     100.909    101.568        0       4  101.78681    2  0
100.909    109.087    101.568        0       5  102.54482    1  0.877423
101.568    109.087    103.212        0       6  102.54482    1  0.877423
102.545    109.087    103.212        0       5  103.42224    2  0
103.212    109.087    107.665        0       6  103.42224    2  0
103.422    109.087    107.665        0       5  110.03606    2  0
107.665    109.087    110.329        0       6  110.03606    2  0
109.087    118.965    110.329        0       7  111.06225    1  0.949492
110.329    118.965    115.441        0       8  111.06225    1  0.949492
111.062    118.965    115.441        0       7  112.01174    2  0
112.012    118.965    115.441        0       6  114.91843    2  0
114.918    118.965    115.441        0       5  122.59998    2  0
115.441    118.965    120.595        0       6  122.59998    2  0
118.965    127.267    120.595        0       7  120.62538    1  3.63498
120.595    127.267    126.868        0       8  120.62538    1  3.63498
120.625    127.267    126.868        0       7  124.26036    2  0
124.26     127.267    126.868        0       6  125.55955    2  0
125.56     127.267    126.868        0       5  132.7951     2  0
126.868    127.267    138.543        0       6  132.7951     2  0
127.267    141.246    138.543        0       7  130.06269    1  5.52817
130.063    141.246    138.543        0       6  135.59086    2  0
135.591    141.246    138.543        0       5  137.80852    2  0
137.809    141.246    138.543        0       4  140.65247    2  0
138.543    141.246    141.846        0       5  140.65247    2  0
140.652    141.246    141.846        0       4  146.86315    2  0
141.246    163.382    141.846        0       5  145.67293    1  5.61742
141.846    163.382    144.19         0       6  145.67293    1  5.61742
144.19     163.382    164.487        0       7  145.67293    1  5.61742
145.673    163.382    164.487        0       6  151.29035    2  0
151.29     163.382    164.487        0       5  156.57839    2  0
156.578    163.382    164.487        0       4  162.64156    2  0
162.642    163.382    164.487        0       3  164.90376    2  0
163.382    174.354    164.487        0       4  165.57628    1  1.52202
164.487    174.354    167.183        0       5  165.57628    1  1.52202
165.576    174.354    167.183        0       4  167.0983     2  0
167.098    174.354    167.183        0       3  171.61915    2  0
167.183    174.354    173.814        0       4  171.61915    2  0
171.619    174.354    173.814        0       3  171.95487    2  0
171.955    174.354    173.814        0       2  173.1993     2  0
173.199    174.354    173.814        0       1  177.98862    2  0
173.814    174.354    192.875        0       2  177.98862    2  0
174.354    179.032    192.875        0       3  175.28987    1  3.63416
175.29     179.032    192.875        0       2  178.92403    2  0
178.924    179.032    192.875        0       1  185.70064    2  0
179.032    194.542    192.875        0       2  182.13353    1  6.66913
182.134    194.542    192.875        0       1  188.80266    2  0
188.803    194.542    192.875        0       0  193.64619    2  0
192.875    194.542    196.345        0       1  193.64619    2  0
193.646    194.542    196.345        0       0  195.11215    2  0
194.542    198.546    196.345        0       1  195.34255    1  0.570558
195.343    198.546    196.345        0       0  195.91311    2  0
195.913    198.546    196.345        0       0               0  0
196.345    198.546    200.723        0       0  199.84699    2  0
198.546    199.848    200.723        0       1  198.80666    1  1.30058
198.807    199.848    200.723        0       0  200.10724    2  0
199.848    200.152    200.723        0       1  199.90852    1  0.25956
199.909    200.152    200.723        0       0  200.16808    2  0
200.152    210.009    200.723        0       1  202.1233     1  0.0162014

'''
